@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix skos: <http://www.w3.org/2004/02/skos/core#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix obo: <http://purl.obolibrary.org/obo/> .
@prefix ex: <http://example.org/shapes#> .

ex:TermEditorPattern a sh:PropertyShape ;
	sh:path obo:IAO_0000117 ;
    sh:pattern "^PERSON:(.*)$" ;
	sh:description "Make sure that \"term editor\" (IAO_0000117) is used with \"PERSON:*\""@en .

ex:DefinitionPattern a sh:PropertyShape ;
	sh:path skos:definition ;
	sh:qualifiedMinCount 1 ;
	sh:qualifiedValueShape [
		sh:datatype rdf:langString ;
		sh:languageIn (
			"en"
		) ;
	] ;
	sh:uniqueLang true .

ex:CurationStatusPattern a sh:PropertyShape ;
	sh:path obo:IAO_0000114 ;
	sh:minCount 1 .

ex:PatternClasses a sh:NodeShape ;
	sh:targetClass owl:Class ;
	sh:property
    	ex:DefinitionPattern,
		ex:ReqLabels,
		ex:CurationStatusPattern,
        ex:TermEditorPattern.

ex:RdfsLabelPattern a sh:PropertyShape ;
	sh:and ( 
		[
			sh:path rdfs:label ;
			sh:qualifiedMinCount 1 ;
			sh:qualifiedValueShape [
				sh:datatype rdf:langString ;
				sh:languageIn (
					"en"
				) ;
			] ;
			sh:uniqueLang true .
		] 
		[
			sh:path rdfs:label ;
			sh:minCount 1 .
		]
	) .

ex:SkosLabelPattern a sh:PropertyShape ;
	sh:and ( 
		[
			sh:path skos:prefLabel ;
			sh:qualifiedMinCount 1 ;
			sh:qualifiedValueShape [
				sh:datatype rdf:langString ;
				sh:languageIn (
					"en"
				) ;
			] ;
			sh:uniqueLang true .
		] 
		[
			sh:path skos:prefLabel ;
			sh:minCount 1 .
		]
	) .

ex:ReqLabels a sh:PropertyShape ;
	sh:or ( ex:RdfsLabelPattern ex:SkosLabelPattern ) ;
	sh:name "Requirements for Labels"@en ;
	sh:message "Requirements for Labels not met, at least one english rdfs:label or one english skos:prefLabel must be present."@en .

ex:PatternObjectProperties a sh:NodeShape ;
	sh:targetClass owl:ObjectProperty ;
	sh:property ex:DefinitionPattern ,
				ex:ReqLabels ,
				ex:CurationStatusPattern , 
				ex:TermEditorPattern .
